
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="../../ansible/conf_ansible/" rel="prev"/>
<link href="../../../../Veille%20techno/Ma%20veille/" rel="next"/>
<link href="../../../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.5.3, mkdocs-material-9.5.6" name="generator"/>
<title>Création du projet terraform - Portfolio</title>
<link href="../../../../assets/stylesheets/main.50c56a3b.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/styles/default.min.css" rel="stylesheet"/>
<script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#creation-du-projet-terraform">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--shadow" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="Portfolio" class="md-header__button md-logo" data-md-component="logo" href="../../../.." title="Portfolio">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Portfolio
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Création du projet terraform
            
          </span>
</div>
</div>
</div>
<script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Portfolio" class="md-nav__button md-logo" data-md-component="logo" href="../../../.." title="Portfolio">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
    Portfolio
  </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../..">
<span class="md-ellipsis">
    Bienvenue sur mon Portfolio
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
<span class="md-ellipsis">
    AP
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
            AP
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
<span class="md-ellipsis">
    AP 3
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_1">
<span class="md-nav__icon md-icon"></span>
            AP 3
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../AP/AP%203/AP3/">
<span class="md-ellipsis">
    Mission agencement de Windows
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
<span class="md-ellipsis">
    BTS SIO 
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            BTS SIO 
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../BTS%20SIO%20/%20BTS%20SIO/">
<span class="md-ellipsis">
     BTS SIO
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
<span class="md-ellipsis">
    CV 
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            CV 
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../CV%20/Mon%20CV/">
<span class="md-ellipsis">
    Mon CV
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
<span class="md-ellipsis">
    Contact
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
            Contact
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../Contact/Comment%20me%20contacter/">
<span class="md-ellipsis">
    Comment me contacter
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
<span class="md-ellipsis">
    Epreuve E4
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
            Epreuve E4
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../Epreuve%20E4/Tableau%20de%20competence/">
<span class="md-ellipsis">
    Tableau de competence
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
<span class="md-ellipsis">
    Epreuve E5
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_7">
<span class="md-nav__icon md-icon"></span>
            Epreuve E5
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../Epreuve%20E5/Situation%201/">
<span class="md-ellipsis">
    Situation 1
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
<span class="md-ellipsis">
    Stage 2023 CD 72
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_8_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_8">
<span class="md-nav__icon md-icon"></span>
            Stage 2023 CD 72
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../Stage_2023_CD_72/CD72/">
<span class="md-ellipsis">
    Présentation de l'organisme
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_8_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_8_2" id="__nav_8_2_label" tabindex="0">
<span class="md-ellipsis">
    Besoin du CD72
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_8_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_8_2">
<span class="md-nav__icon md-icon"></span>
            Besoin du CD72
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../Stage_2023_CD_72/Besoin%20du%20CD72/besoin/">
<span class="md-ellipsis">
    Pourquoi avoir effectuer cette mission
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_8_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_8_3" id="__nav_8_3_label" tabindex="0">
<span class="md-ellipsis">
    Documentation
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_8_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_8_3">
<span class="md-nav__icon md-icon"></span>
            Documentation
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../Stage_2023_CD_72/Documentation/Docker-compose/">
<span class="md-ellipsis">
    Docker-compose, apache, php, mariadb
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../Stage_2023_CD_72/Documentation/GITHUB/">
<span class="md-ellipsis">
    Création d'un dépôt GITHUB pour héberger mon Portfolio
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../Stage_2023_CD_72/Documentation/GITLAB/">
<span class="md-ellipsis">
    SSH : Clé privée, clé publique, gitlab
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../Stage_2023_CD_72/Documentation/Mkdocs/">
<span class="md-ellipsis">
    Mkdocs
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../Stage_2023_CD_72/Documentation/Multipass%26docker/">
<span class="md-ellipsis">
    Multipass, docker
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../Stage_2023_CD_72/Documentation/Registry%20docker/">
<span class="md-ellipsis">
    Installation SRV-DOCK et Registry Docker
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../Stage_2023_CD_72/Documentation/Script/">
<span class="md-ellipsis">
    Création Script pour récupérer le volume de la partitions “home” et mettre cette information dans la base de données MariaDB
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../Stage_2023_CD_72/Documentation/gitlab-ci.yml/">
<span class="md-ellipsis">
    Pipelines, CI, CD
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_8_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_8_4" id="__nav_8_4_label" tabindex="0">
<span class="md-ellipsis">
    Mission
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_8_4_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_8_4">
<span class="md-nav__icon md-icon"></span>
            Mission
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../Stage_2023_CD_72/Mission/Mission%201/">
<span class="md-ellipsis">
    Le déploiment continue avec docker
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../Stage_2023_CD_72/Mission/Mission%202/">
<span class="md-ellipsis">
    La documentation
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_8_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_8_5" id="__nav_8_5_label" tabindex="0">
<span class="md-ellipsis">
    Rapport quotidien
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_8_5_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_8_5">
<span class="md-nav__icon md-icon"></span>
            Rapport quotidien
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../Stage_2023_CD_72/Rapport%20quotidien/Tableau%20rapport%20quotidien/">
<span class="md-ellipsis">
    Tableau rapport quotidien
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_9" type="checkbox"/>
<label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
<span class="md-ellipsis">
    Stage 2024 CD72
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_9_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_9">
<span class="md-nav__icon md-icon"></span>
            Stage 2024 CD72
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../CD72/">
<span class="md-ellipsis">
    Présentation de l'organisme
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../rapport_quotidien/">
<span class="md-ellipsis">
    Rapport quotidien
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_9_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_9_3" id="__nav_9_3_label" tabindex="0">
<span class="md-ellipsis">
    Documentation
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_9_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_9_3">
<span class="md-nav__icon md-icon"></span>
            Documentation
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../Vagrant/">
<span class="md-ellipsis">
    Le fonctionnement de Vagrant
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_9_3_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_9_3_2" id="__nav_9_3_2_label" tabindex="0">
<span class="md-ellipsis">
    Proxmox
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_9_3_2_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_9_3_2">
<span class="md-nav__icon md-icon"></span>
            Proxmox
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../Proxmox/Creation_template/">
<span class="md-ellipsis">
    Pourquoi créer des templates
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../Proxmox/Gestion_du_stockage/">
<span class="md-ellipsis">
    Le stockage sur Proxmox
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../Proxmox/installation_proxmox/">
<span class="md-ellipsis">
    Installation Proxmox VE 8.1
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_9_3_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_9_3_3" id="__nav_9_3_3_label" tabindex="0">
<span class="md-ellipsis">
    Ansible
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_9_3_3_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_9_3_3">
<span class="md-nav__icon md-icon"></span>
            Ansible
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../ansible/conf_ansible/">
<span class="md-ellipsis">
    Utilsation de Ansible pour installer des services sur la vm
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_9_3_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_9_3_4" id="__nav_9_3_4_label" tabindex="0">
<span class="md-ellipsis">
    Terraform
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_9_3_4_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_9_3_4">
<span class="md-nav__icon md-icon"></span>
            Terraform
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    Création du projet terraform
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_10" type="checkbox"/>
<label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
<span class="md-ellipsis">
    Veille techno
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_10_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_10">
<span class="md-nav__icon md-icon"></span>
            Veille techno
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../Veille%20techno/Ma%20veille/">
<span class="md-ellipsis">
    Une veille c'est quoi ?
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="creation-du-projet-terraform">Création du projet terraform</h1>
<p>Tout d'abord, il faudra installer terraform sur votre machine </p>
<p>Il y aura quelques a effectuer tout d'abord assurez-vous que votre système est à jour et que vous avez installé les packages <strong>gnupg</strong>, <strong>software-properties-commonet</strong> installés <strong>.curl</strong>. Vous utiliserez ces packages pour vérifier la signature GPG de HashiCorp et installer le référentiel de packages Debian de HashiCorp :</p>
<pre><code class="language-bash">
 sudo  apt-get update &amp;&amp;  sudo  apt-get  install -y gnupg software-properties-common

 ~~~

Ensuite, Installez la **clé GPG HashiCorp**.

 ~~~bash 

wget -O- https://apt.releases.hashicorp.com/gpg |  \
gpg --chermor |  \ 
sudo  tee /usr/share/keyrings/hashicorp-archive-keyring.gpg

</code></pre>
<p>La commande <strong>gpg</strong> rapportera l'empreinte de la clé </p>
<p>Puis, ajoutez le référentiel officiel HashiCorp à votre système. La commande <strong>La lsb_release -cs</strong> recherche le nom de code de la version de distribution de votre système actuel, tel que <strong>buster</strong>, <strong>groovy</strong> ou <strong>id</strong>.</p>
<pre><code class="language-bash">
 echo "deb [signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] \
https://apt.releases.hashicorp.com $(lsb_release -cs) main" | \
sudo tee /etc/apt/sources.list.d/hashicorp.list

</code></pre>
<p>Maintenant, il faudra mettre a jour vos paquets </p>
<pre><code class="language-bash">
sudo apt-get update

</code></pre>
<p>Enfin vous pourrez installer <strong>Terraform</strong></p>
<pre><code class="language-bash">
 sudo  apt-get  install terraform

</code></pre>
<h1 id="creation-de-lapi-jeton-proxmox">Création de l'API JETON PROXMOX</h1>
<p>Tout d'abord, allez sur votre proxmox : <strong>http://ip_de_votre_machine:8006</strong></p>
<p>Ensuite, allez sur l'onglet <strong>API Tokens</strong></p>
<p><img alt="api_token" src="/images/API-Token.jpg"/></p>
<p>Puis, cliquez sur <strong>Add</strong> </p>
<p><img alt="add" src="/images/add.jpg"/></p>
<p>Vous aurez cette fenêtre apparaître : </p>
<p><img alt="fenetre_token" src="/images/fenetre_token.jpg"/></p>
<ul>
<li>Renseigner l'utilisateur associé a ce jeton </li>
<li>Lui mettre un nom (ID)</li>
<li>Décocher <strong>Privilege Separation</strong></li>
<li>Faites <strong>add</strong></li>
</ul>
<p>Une cela fait vous verrez cette fenêtre apparaitre :</p>
<p><img alt="Secret_id" src="/images/secret_id.jpg"/></p>
<p><strong>NOTEZ CES INFORMATIONS QUELQUES PART CAR VOUS EN AUREZ BESOIN ET CES INFORMATIONS NE PEUVENT PAS ETRE RELUE PLUSIEURS FOIS</strong></p>
<h1 id="creation-des-fichier-terraform">Création des fichier terraform</h1>
<p>Tout dd'abord créer un dossier dans lequel vous mettrez vos fichiers terraform :</p>
<pre><code class="language-bash">
mkdir terraform

</code></pre>
<p>Créer vos fichier sur vscode se sera plus pratique</p>
<p><a href="http://srv-tst-dock.cg72.fr:8080/Doc_stage_2023/GITLAB/">lien connection ssh</a></p>
<p>Ce lien vous explique comment connecter votre machine en ssh sur vscode</p>
<p>Ensuite vous aller créer un premier fichier confidentiel qui va permettre de stocker le lien de votre proxmox ainsi que les informations de votre API TOKEN</p>
<p>Pour cela nommez ce fichier "credentials.auto.tfvars"</p>
<pre><code class="language-bash">
proxmox_api_url = "http://ip_de_votre_machine:8006/api2/json"
proxmox_api_token_id = "Votre ID jeton"
proxmox_api_token_secret = "Votre sercret"

</code></pre>
<p>Une fois cela fait faites <strong>contol+s</strong></p>
<p>Ensuite créer un fichier <strong>provider.tf</strong> : </p>
<p>Il faudra mettre ces informations : </p>
<pre><code class="language-bash">
# Configuration de Terraform et spécification des versions des fournisseurs requis
terraform { 
  required_providers {
    proxmox = {
      source  = "TheGameProfi/proxmox"
      version = "2.9.16"
    }
  }
}

# Variables pour les informations d'authentification et de configuration Proxmox
variable "proxmox_api_url" {
    type = string 
}

variable "proxmox_api_token_id" {
    type = string
    sensitive = true  # Marque la variable comme sensible (sensible) pour masquer sa valeur
}

variable "proxmox_api_token_secret" {
    type = string 
    sensitive = true   # Marque la variable comme sensible pour masquer sa valeur
}


# Fournisseur Proxmox avec les détails d'authentification
provider "proxmox" {
  pm_api_url           = var.proxmox_api_url
  pm_api_token_id      = var.proxmox_api_token_id
  pm_api_token_secret  = var.proxmox_api_token_secret
  pm_tls_insecure      = true    # Désactive la vérification TLS pour les connexions (utilisé dans les environnements de test)
  pm_debug             = true    # Active le mode débogage pour le fournisseur Proxmox
}
</code></pre>
<p>Ce fichier va permettre a terraform de joindre l'api de proxmox</p>
<p>Enfin, il faudra créer un dernier fichier qui va permettre de configurer votre vm </p>
<p>Il s'appelera généralement <strong>main.tf</strong></p>
<p>Voici ce qu'on peut retrouver dans ce fichier </p>
<pre><code class="language-bash">
# Définition de la ressource de la machine virtuelle Proxmox
resource "proxmox_vm_qemu" "vm_basic" {
  # Nom de la machine virtuelle
  name       = "test-vm-anto-tst-6"
  # Noeud cible sur lequel déployer la machine virtuelle
  target_node = "SRV-VIR-PRXMX"
  # Modèle à utiliser pour le clonage
  clone      = "tmplt-ubt2204-propre"
  # Pool dans lequel la machine virtuelle sera placée
  pool       = "test"
  # Activation de l'agent de Proxmox pour la gestion de la machine virtuelle
  agent      = 1
  # Type de système d'exploitation utilisé
  os_type    = "cloud-init"
  # Nombre de cœurs CPU
  cores      = 2
  # Nombre de sockets CPU
  sockets    = 1
  # Configuration CPU pour correspondre au modèle de CPU de l'hôte
  cpu        = "host"
  # Mémoire RAM de la machine virtuelle (en Mo)
  memory     = 2048
  # Disque de démarrage
  bootdisk   = "virtio0"

  # Configuration du réseau
  network {
    # Modèle de carte réseau virtuelle
    model  = "virtio"
    # Pont réseau sur lequel la machine virtuelle sera connectée
    bridge = "vmbr0"
  }

  # Configuration de l'adresse IP et de la passerelle
  ipconfig0    = "ip=172.16.100.6/16,gw=172.16.255.254"
  # Serveur de noms DNS à utiliser
  nameserver   = "172.16.20.160"
  # Domaine de recherche DNS
  searchdomain = "cg72.fr"
  # Nom d'utilisateur pour l'initialisation cloud-init
  ciuser       = "root"
  # Mot de passe pour l'initialisation cloud-init
  cipassword   = "root"

  # Provisionnement avec un exécuteur local
  provisioner "local-exec" {
    # Commande à exécuter après le déploiement de la machine virtuelle
    command = "sleep 1m &amp;&amp; ANSIBLE_HOST_KEY_CHECKING=False ansible-playbook -i '172.16.100.6,' -u root   /home/anto/automatisation/ansible/setup_vm.yml"
  }
}

</code></pre>
<h1 id="utilsation-de-ansible-pour-installer-des-services-sur-la-vm">Utilsation de Ansible pour installer des services sur la vm</h1>
<p>Tout d'abord créer un dossier ansible </p>
<pre><code class="language-bash">
mkdir ansible

</code></pre>
<p>Il faudra créer un dossier task où il y aura votre playbook</p>
<pre><code class="language-bash">
mkdir task

</code></pre>
<p>Il faudra créer un dossier template on vous y mettrez vos template </p>
<pre><code class="language-bash">
mkdir template

</code></pre>
<p>Ensuite dans ce dossier il faudra créer un playbook dans lequel vous allez définire les tâches à réaliser </p>
<pre><code class="language-bash">
- name: Configure Proxy and Timezone, Update Packages, Install and Start Apache
  hosts: all
  become: yes  # Autoriser l'exécution des tâches en tant que superutilisateur

  tasks:

    - name: COPY SET PROXY CONF
      become: yes  # Exécuter cette tâche en tant que superutilisateur
      ansible.builtin.template:  # Utilisation du module template pour copier un fichier template
        src: /home/anto/automatisation/ansible/90curtin-aptproxy.j2
        dest: '/etc/apt/apt.conf.d/90curtin-aptproxy'  # Destination du fichier généré
        owner: root  # Propriétaire du fichier
        group: root  # Groupe du fichier
        mode: '0644'  # Permissions du fichier


    - name: Configure proxy in /etc/environment for HTTP
      lineinfile:  # Utilisation du module lineinfile pour gérer les lignes dans un fichier texte
        path: /etc/environment  # Chemin du fichier
        regexp: '^http_proxy='  # Expression régulière pour rechercher une ligne
        line: 'http_proxy=proxy'  # Ligne à ajouter ou modifier
        state: present  # État de la ligne (présent dans ce cas)


    - name: Configure proxy in /etc/environment for HTTPS
      lineinfile:  # Utilisation du module lineinfile pour gérer les lignes dans un fichier texte
        path: /etc/environment  # Chemin du fichier
        regexp: '^https_proxy='  # Expression régulière pour rechercher une ligne
        line: 'https_proxy=proxy'  # Ligne à ajouter ou modifier
        state: present  # État de la ligne (présent dans ce cas)


    - name: Set timezone
      timezone:  # Utilisation du module timezone pour configurer le fuseau horaire
        name: "Europe/Paris"  # Nom du fuseau horaire à configurer


    - name: Update packages
      apt:  # Utilisation du module apt pour gérer les packages sous Debian/Ubuntu
        update_cache: yes  # Mise à jour de la cache des paquets
        upgrade: yes  # Mise à jour des packages installés


    - name: Install Apache web server
      apt:  # Utilisation du module apt pour gérer les packages sous Debian/Ubuntu
        name: apache2  # Nom du package à installer
        state: present  # État souhaité du package (présent dans ce cas)

    - name: Ensure Apache service is started and enabled
      service:  # Utilisation du module service pour gérer les services système
        name: apache2  # Nom du service à gérer (Apache dans ce cas)
        state: started  # État souhaité du service (démarré dans ce cas)
        enabled: yes  # Activer le service au démarrage du système

</code></pre>
<p>Ensuite pour indiquer le proxy, il faudra créer un template comme indiquer dans le code. Dans ce fichier vous allez indiquer l'addresse de votre proxy : </p>
<pre><code class="language-bash">
Acquire::http::Proxy "{{ http_proxy }}";
Acquire::https::Proxy "{{ https_proxy }}";

</code></pre>
<p>Enfin dans votre fichier <strong>main.tf</strong> il faudra renseigner cette ligne :</p>
<pre><code class="language-bash">
 # Commande à exécuter après le déploiement de la machine virtuelle
    command = "sleep 1m &amp;&amp; ANSIBLE_HOST_KEY_CHECKING=False ansible-playbook -i '172.16.100.6,' -u root   /home/anto/automatisation/ansible/setup_vm.yml"

</code></pre>
<p>Elle va permettre d'executer l'ansible sur la vm provisionnée automatiquement.</p>
<p>Une fois les fichiers dont a besoin terraform et ansible sont crée allez sur votre machine est aller sur votre dossier <strong>terraform</strong>.</p>
<p>Une fois cela fait vous aurez 5 commandes a effectuer :</p>
<ul>
<li>Les deux premières commandes va servir a renseigner la clé ssh parce que ansible ne peut pas la renseigné tout seul</li>
</ul>
<pre><code class="language-bash">
ssh-agent $SHELL

ssh-add 
</code></pre>
<p>Ensuite renseigner votre clé ssh </p>
<ul>
<li>La troisième commande va permettre d'installer le plugin : </li>
</ul>
<pre><code class="language-bash">
sudo terraform init -upgrade 

</code></pre>
<ul>
<li>La quatrième sera pour voir si votre fichier est valide </li>
</ul>
<pre><code class="language-bash">
sudo terraform validate 

</code></pre>
<ul>
<li>Enfin la dernière sera pour créer la vm sur proxmox </li>
</ul>
<pre><code class="language-bash">
sudo terraform apply -auto-approuve 

</code></pre>
<p>Une fois ce processus effectuer vous pourrez voir votre vm dans le menu de gauche de proxmox </p>
<p><img alt="vm" src="/images/vm.jpg"/></p>
<h1 id="note">Note</h1>
<p>Dans proxmox, une fois le apply fait vous verrez les logs de cette commande dans proxmox en bas de votre écran :</p>
<p><img alt="logs" src="/images/vm2.jpg"/></p>
<h1 id="attention">Attention</h1>
<p><strong>Veuillez enlever les commantaires des fichiers cela est juste a titre explicatif, car sinon votre déploiment va mal se passer</strong></p>
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../../../..", "features": [], "search": "../../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
<script src="../../../../assets/javascripts/bundle.e1c3ead8.min.js"></script>
<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/highlight.min.js"></script>
<script src="../../../../javascripts/config.js"></script>
</body>
</html>